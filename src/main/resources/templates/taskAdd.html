<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion Clone</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
<div class="flex h-screen">
    <!-- 사이드바 -->
    <div class="w-64 bg-white p-4 shadow-md">
        <h2 class="text-lg font-bold mb-4">My Notion</h2>
        <ul>
            <li class="py-2 px-3 hover:bg-gray-200 rounded cursor-pointer">
                <a href="/home" class="block w-full h-full">Home</a>
            </li>
            <li class="py-2 px-3 hover:bg-gray-200 rounded cursor-pointer relative" onmouseover="showAddButton('noteAddBtn')" onmouseout="hideAddButton('noteAddBtn')">
                <a href="/note" class="block w-full h-full">Notes</a>
                <!-- Notes 항목에 + 버튼 추가 -->
                <button id="noteAddBtn" class="absolute top-1 right-1 bg-blue-500 text-white p-1 rounded-full hidden" onclick="showNoteInput()">+</button>
            </li>
            <li class="py-2 px-3 hover:bg-gray-200 rounded cursor-pointer relative" onmouseover="showAddButton('taskAddBtn')" onmouseout="hideAddButton('taskAddBtn')">
                <a href="/task" class="block w-full h-full">Tasks</a>
                <!-- Tasks 항목에 + 버튼 추가 -->
                <button id="taskAddBtn" class="absolute top-1 right-1 bg-blue-500 text-white p-1 rounded-full hidden" onclick="showTaskInput()">+</button>
            </li>
        </ul>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="flex-1 p-6">
        <h1 class="text-2xl font-bold mb-4">Notion 클론에 오신 것을 환영합니다</h1>

        <!-- 태스크 목록 -->
        <div class="p-4 bg-white rounded shadow-md" id="taskSection">
            <h2 class="text-lg font-semibold">📌 태스크 목록</h2>
            <ul id="taskContainer" class="mt-2 space-y-2"></ul>
        </div>

        <!-- 태스크 작성 섹션 -->
        <div id="taskInputSection" class="p-4 bg-white rounded shadow-md mt-6 hidden">
            <h2 class="text-lg font-semibold">📝 새 태스크 작성</h2>
            <textarea id="taskInput" class="w-full p-2 border rounded mt-2" placeholder="새로운 태스크를 작성하세요..."></textarea>
            <button onclick="addTask()" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">작성</button>
        </div>
    </div>
</div>

<script>
    // 태스크 추가 버튼 표시
    function showAddButton(id) {
        document.getElementById(id).classList.remove("hidden");
    }

    // 태스크 추가 버튼 숨기기
    function hideAddButton(id) {
        document.getElementById(id).classList.add("hidden");
    }

    // 태스크 작성 입력창 표시
    function showTaskInput() {
        document.getElementById("taskInputSection").classList.remove("hidden");
    }

    // 태스크 추가 기능
    function addTask() {
        let taskInput = document.getElementById("taskInput");
        let taskContainer = document.getElementById("taskContainer");
        let taskText = taskInput.value.trim();

        if (taskText === "") return;

        let li = document.createElement("li");
        li.className = "p-4 bg-white rounded shadow flex justify-between items-center cursor-pointer";

        let span = document.createElement("span");
        span.textContent = taskText;
        span.className = "flex-1 text-gray-800";

        let menuBtn = document.createElement("button");
        menuBtn.textContent = "⋮";
        menuBtn.className = "text-gray-500 ml-2 hover:text-gray-700";
        menuBtn.onclick = function (event) {
            event.stopPropagation();
            let newText = prompt("수정할 내용을 입력하세요", span.textContent);
            if (newText !== null && newText.trim() !== "") {
                span.textContent = newText;
            }
        };

        let deleteBtn = document.createElement("button");
        deleteBtn.textContent = "✕";
        deleteBtn.className = "text-red-500 ml-2 hover:text-red-700";
        deleteBtn.onclick = function (event) {
            event.stopPropagation();
            taskContainer.removeChild(li);
        };

        li.appendChild(span);
        li.appendChild(menuBtn);
        li.appendChild(deleteBtn);
        taskContainer.appendChild(li);

        taskInput.value = "";
        document.getElementById("taskInputSection").classList.add("hidden");
    }
</script>
</body>
</html>
